/* eslint-disable no-undef */
// $('.accordion-item__body:first').show(); if you want to first accordion open. Take the first accordion HTML add class active
$('.accordion-item h2').click(function() {
  // self clicking close
  if ($(this).next('.accordion-item__body').hasClass('active')) {
    $(this).next('.accordion-item__body').removeClass('active').slideUp();
    // $(this).children('span').removeClass('fa-minus').addClass('fa-plus');
    $(this).children('span').removeClass('active');
    $(this).children('span').html('+');
    $(this).removeClass('active');
    $(this).parent('.accordion-item').removeClass('active');
  } else {
    $('.accordion-item__body').removeClass('active').slideUp();
    // $('.accordion-item h2 span').removeClass('fa-minus').addClass('fa-plus');
    $('.accordion-item h2 span').html('+');
    $('.accordion-item h2 span').removeClass('active');
    $('.accordion-item h2').removeClass('active');
    $('.accordion-item').removeClass('active');
    $(this).parent('.accordion-item').removeClass('active');

    $(this).next('.accordion-item__body').addClass('active').slideDown();
    // $(this).children('span').removeClass('fa-plus').addClass('fa-minus');
    $(this).children('span').html('-');
    $(this).children('span').addClass('active');
    $(this).addClass('active');
    $(this).parent('.accordion-item').addClass('active');
  }
});

$(document).ready(function() {

  $(".account-tab-content").hide();
  $("#tab1_content").show();
  $('ul.tabs li').removeClass('active');
  $('#tab1').addClass('active');

  $("#tab1").click(function() {
    $(".account-tab-content").hide();
    $("#tab1_content").show();
    $('ul.tabs li').removeClass('active');
    $('#tab1').addClass('active');
  });

  $("#tab2").click(function() {
    $(".account-tab-content").hide();
    $("#tab2_content").show();
    $('ul.tabs li').removeClass('active');
    $('#tab2').addClass('active');
  });

  $("#tab3").click(function() {
    $(".account-tab-content").hide();
    $("#tab3_content").show();
    $('ul.tabs li').removeClass('active');
    $('#tab3').addClass('active');
  });

  $("#tab4").click(function() {
    $(".account-tab-content").hide();
    $("#tab4_content").show();
    $('ul.tabs li').removeClass('active');
    $('#tab4').addClass('active');
  });
});
/* eslint-disable func-names */
/* eslint-disable no-undef */
/* eslint-disable prefer-arrow-callback */
$(document).ready(function () {
  $('.color-panel__element').on('click', function () {
    $('.color-panel__element').each(function () {
      $(this).removeClass('color-panel__element_active');
    });
    $(this).addClass('color-panel__element_active');
  });
});

/* global document, window, select */
const iconContacts = document.querySelector('#icon-contacts');

function contactsToggle() {
  const contactsDropdown = select('.contacts-dropdown');

  iconContacts.addEventListener('click', () => {
    contactsDropdown.classList.toggle('contacts-dropdown_active');
  });

  document.addEventListener('click', (e) => {
    const { target } = e;
    const itsDropdown = target === iconContacts || iconContacts.contains(target);
    const isActive = contactsDropdown.classList.contains('contacts-dropdown_active');

    if (!itsDropdown && isActive) {
      contactsDropdown.classList.toggle('contacts-dropdown_active');
    }
  });
}

window.onload = contactsToggle();

/* global window, document, select */

const scrollSearch = select('#scroll-search');
const search = select('#header-search');
const mainMenu = select('.main-menu');

function headerSearchToggle() {
  scrollSearch.addEventListener('click', () => {
    search.classList.toggle('search_active');
    mainMenu.classList.toggle('main-menu_hidden');
    document.getElementById('header-search-input').focus();
  });

  const body = select('body');

  window.addEventListener('scroll', () => {
    if (body.scrollTop === 0) {
      search.classList.remove('search_active');
      mainMenu.classList.remove('main-menu_hidden');
    }
  }, true);
}

window.onload = headerSearchToggle();

/* global document, window, select */
const iconUser = document.querySelector('#icon-user');

function userToggle() {
  const userDropdown = select('.user-dropdown');

  iconUser.addEventListener('click', () => {
    userDropdown.classList.toggle('user-dropdown_active');
  });

  document.addEventListener('click', (e) => {
    const { target } = e;
    const itsDropdown = target === iconUser || iconUser.contains(target);
    const isActive = userDropdown.classList.contains('user-dropdown_active');

    if (!itsDropdown && isActive) {
      userDropdown.classList.toggle('user-dropdown_active');
    }
  });
}

window.onload = userToggle();

/* eslint-disable func-names */
/* eslint-disable prefer-arrow-callback */
/* eslint-disable no-undef */
$(document).ready(function () {
  $('.main-slider__slider').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    dots: true,
    speed: 300,
    autoplaySpeed: 2000,
  });
});

/* eslint-disable func-names */
/* eslint-disable no-undef */
/* eslint-disable prefer-arrow-callback */
window.addEventListener('scroll', function () {
  const productsLoop = document.querySelector('.products-loop');
  if (productsLoop) {
    if (body.scrollTop > 85) {
      productsLoop.classList.add('products-loop_padding-top_enabled');
    } else {
      productsLoop.classList.remove('products-loop_padding-top_enabled');
    }
  }
}, true);

const toggle3col = select('#grid-3col');
const toggle4col = select('#grid-4col');

function toggleProductLoop() {
  if (toggle3col && toggle4col) {
    const loopGrid = document.querySelector('.loop-grid');
    const productCard = loopGrid.querySelectorAll('.loop-grid .product-card__images');

    if (toggle3col.checked) {
      loopGrid.classList.remove('loop-grid_columns_4');
      loopGrid.classList.add('loop-grid_columns_3');
      //item.classList.remove('product-card__images_size_medium');
      //item.classList.add('product-card__images_size_large');
      reloadSlick();
    }
    if (toggle4col.checked) {
      loopGrid.classList.remove('loop-grid_columns_3');
      loopGrid.classList.add('loop-grid_columns_4');
      //item.classList.remove('product-card__images_size_large');
      //item.classList.add('product-card__images_size_medium');
      reloadSlick();
    }

    /* for (const item of productCard) {
      if (toggle3col.checked) {
        loopGrid.classList.remove('loop-grid_columns_4');
        loopGrid.classList.add('loop-grid_columns_3');
        //item.classList.remove('product-card__images_size_medium');
        //item.classList.add('product-card__images_size_large');
        reloadSlick();
      }
      if (toggle4col.checked) {
        loopGrid.classList.remove('loop-grid_columns_3');
        loopGrid.classList.add('loop-grid_columns_4');
        //item.classList.remove('product-card__images_size_large');
        //item.classList.add('product-card__images_size_medium');
        reloadSlick();
      }
    } */
  }
}

if (toggle3col && toggle4col) {
  window.onload = toggle3col.addEventListener('click', toggleProductLoop);
  window.onload = toggle4col.addEventListener('click', toggleProductLoop);
}
/* eslint-disable no-undef */
const $carouselle = $('.products-slider');

const productsSliderSettings = {
  dots: false,
  arrows: true,
  slide: '.slick-slideshow__slide',
  slidesToShow: 4,
  infinite: false,
  // centerMode: false,
  // centerPadding: '60px',
  responsive: [
    {
      breakpoint: 767,
      settings: {
        slidesToShow: 1,
        infinite: true,
      },
    },
  ],
};

function setSlideVisibility() {
  // Find the visible slides i.e. where aria-hidden="false"
  const visibleSlides = $carouselle.find('.slick-slideshow__slide[aria-hidden="false"]');
  // Make sure all of the visible slides have an opacity of 1
  $(visibleSlides).each(function() {
    $(this).css('opacity', 1);
  });

  // Set the opacity of the first and last partial slides.
  $(visibleSlides).first().prev().css('opacity', 0);
}

$carouselle.slick(productsSliderSettings);
$carouselle.slick('slickGoTo', 1);
setSlideVisibility();

$carouselle.on('afterChange', () => {
  setSlideVisibility();
});

/* eslint-disable no-undef */
jQuery(document).ready(($) => {
  $('#side-popup-size__trigger').on('click', (event) => {
    event.preventDefault();
    $('#side-popup-size').addClass('is-visible');
  });
  $('#side-popup-size').on('click', function(event) {
    if ($(event.target).is('.side-popup_close') || $(event.target).is('#side-popup-size')) {
      event.preventDefault();
      $(this).removeClass('is-visible');
    }
  });
});

/* eslint-disable no-undef */
jQuery(document).ready(() => {
  jQuery('.contact-btn').click(() => {
    jQuery('.header').toggleClass('z-index-min').delay(1100).fadeIn('slow');
    jQuery('#side-box').toggleClass('open-box');
    jQuery('#sticky-side').toggleClass('to-margin');
    // jQuery('.contact-btn').toggleClass('opened');
  });
  jQuery('#menu-close').click(() => {
    jQuery('#side-box').removeClass('open-box');
    jQuery('#sticky-side').removeClass('to-margin');
    jQuery('.header').removeClass('z-index-min').delay(1100).fadeIn('slow');
    // jQuery('.contact-btn').removeClass('opened');
  });
  jQuery('.contact-side').click(() => {
    jQuery('#conact-content').toggleClass('open-box');
    jQuery('.header').toggleClass('z-index-min').delay(1100).fadeIn('slow');
  });
  jQuery(document).click((e) => {
    if (jQuery(e.target).closest('#side-box').length === 0 && jQuery(e.target).closest('.contact-btn').length === 0) {
      jQuery('#side-box').removeClass('open-box');
      jQuery('#sticky-side').removeClass('to-margin').delay(1100).fadeIn('slow');
      jQuery('.header').removeClass('z-index-min');
    }
  });
});

$('.tab a').on('click', function (e) {
  e.preventDefault();
  $(this).parent().addClass('active');
  $(this).parent().siblings().removeClass('active');
  target = $(this).attr('href');
  $('.tab-content > div').not(target).hide();
  $(target).fadeIn(600);
});

/* global window, document */

const header = document.querySelector('header');
const body = document.querySelector('body');
const searchBtn = document.querySelector('#scroll-search');

window.addEventListener('scroll', () => {
  if (window.pageYOffset > 0) {
    header.classList.add('sticky');
    searchBtn.classList.remove('hidden');
  } else {
    header.classList.remove('sticky');
    searchBtn.classList.add('hidden');
  }
}, true);

/* eslint-disable no-restricted-syntax */
/* global document, window */
const mainMenuItems = document.querySelectorAll('.main-menu_item');

function mainMenuDropdown() {
  for (const item of mainMenuItems) {
    const trigger = item.querySelector('a');
    const dropdown = item.querySelector('.menu-dropdown-item');

    trigger.addEventListener('click', (e) => {
      e.preventDefault();
      dropdown.classList.toggle('menu-dropdown-item_active');
    });

    document.addEventListener('click', (e) => {
      const { target } = e;
      const itsDropdown = target === item || item.contains(target);
      const isActive = dropdown.classList.contains('menu-dropdown-item_active');

      if (!itsDropdown && isActive) {
        dropdown.classList.toggle('menu-dropdown-item_active');
      }
    });

    item.addEventListener('mouseout', (e) => {
      const { relatedTarget } = e;
      const itsDropdown = relatedTarget === item || item.contains(relatedTarget);
      const isActive = item.classList.contains('menu-dropdown-item_active');

      if (!itsDropdown && isActive) {
        item.classList.toggle('menu-dropdown-item_active');
      }
    });
  }
}

window.onload = mainMenuDropdown();


/* eslint-disable no-undef */
jQuery(document).ready(($) => {
  $('#icon-cart').on('click', (event) => {
    event.preventDefault();
    $('#side-popup-cart').addClass('is-visible');
  });
  $('#side-popup-cart').on('click', function(event) {
    if ($(event.target).is('.side-popup_close') || $(event.target).is('#side-popup-cart')) {
      event.preventDefault();
      $(this).removeClass('is-visible');
    }
  });
});

$('.product-description').magnificPopup({
  delegate: 'a',
  type: 'image',
  gallery:{
    enabled: true,
  },
  removalDelay: 300,
  zoom: {
    enabled: false, // By default it's false, so don't forget to enable it

    duration: 300, // duration of the effect, in milliseconds
    easing: 'ease-in-out', // CSS transition easing function

    
  }

  // other options
});

/* eslint-disable no-unused-vars */
/* eslint-disable no-restricted-syntax */
/* global document, window */
const sizeTableItems = document.querySelectorAll('.size-table__item');

function sizeTablePriceEnable(target) {
  const price = target.querySelector('.price');
  const quantitySelects = target.querySelector('.quantity-selects');

  target.addEventListener('mouseover', () => {
    price.classList.toggle('disable');
    quantitySelects.classList.toggle('enable');
  });
  target.addEventListener('mouseout', () => {
    price.classList.toggle('disable');
    quantitySelects.classList.toggle('enable');
  });
}

function sizeTableItemsToggle() {
  for (const item of sizeTableItems) {
    sizeTablePriceEnable(item);
  }
}

let quantity = 0;

function getCurrentPrice(item) {
  const currentPrice = item.querySelector('.price p').innerHTML;
  return currentPrice.substr(0, currentPrice.length - 4);
}

function changeAddToCartText(p, q) {
  const addToCartButton = document.querySelector('.add-to-cart_single-product button');
  const firstText = 'Добавить в корзину ';
  let secondText = '';
  let qStr = String(q);
  qStr = qStr[qStr.length - 1];
  if (qStr === '1' && q !== 11) {
    secondText = 'товар';
  } else if ((qStr === '2' || qStr === '3' || qStr === '4') && (q < 11 || q > 20)) {
    secondText = 'товара';
  } else {
    secondText = 'товаров';
  }

  if (q === 0) {
    addToCartButton.innerHTML = `${firstText}`;
  } else {
    addToCartButton.innerHTML = `${firstText}${q} ${secondText} (${p * q} руб)`;
  }
}

function quantityStepDown(currentItem) {
  const quantitySelects = currentItem.parentNode;
  const tableItem = quantitySelects.parentNode;
  const price = getCurrentPrice(tableItem);
  const v = currentItem.nextElementSibling.value;
  if (v > 0) {
    currentItem.nextElementSibling.stepDown();
    if (quantity > 0) {
      quantity -= 1;
      changeAddToCartText(price, quantity);
    }
  }
}

function quantityStepUp(currentItem) {
  const quantitySelects = currentItem.parentNode;
  const tableItem = quantitySelects.parentNode;
  const price = getCurrentPrice(tableItem);
  currentItem.previousElementSibling.stepUp();
  quantity += 1;
  changeAddToCartText(price, quantity);
}

window.onload = sizeTableItemsToggle();

/* global window, document */
window.addEventListener('scroll', () => {
  const body = document.querySelector('body');
  const filters = document.querySelector('.topbar-filter');
  if (filters) {
    if (window.pageYOffset > 85) {
      filters.classList.add('topbar-filter_sticky');
      filters.classList.remove('bg_grey');
      filters.classList.add('bg_white');
    } else {
      filters.classList.remove('topbar-filter_sticky');
      filters.classList.remove('bg_white');
      filters.classList.add('bg_grey');
    }
  }
}, true);

/* global select, window */

const iconClear = select('.icon-clear');
const mainSearchInput = select('#topbar-search-input');

function clearSearchInput() {
  if (iconClear) {
    iconClear.addEventListener('click', () => {
      mainSearchInput.innerHTML = '';
      mainSearchInput.value = '';
      mainSearchInput.focus();
    });
  }
}

window.onload = clearSearchInput();

/* eslint-disable func-names */
/* eslint-disable prefer-arrow-callback */
/* eslint-disable no-undef */
$(document).ready(function () {
  $('.collection-slider').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    dots: true,
    speed: 300,
    autoplaySpeed: 2000,
  });
});


/* eslint-disable no-restricted-syntax */
/* global window, document */

function dropdownOnClick() {
  const dropdownsList = document.querySelectorAll('.dropdown');
  for (const item of dropdownsList) {
    item.addEventListener('click', () => {
      item.classList.toggle('dropdown_active');
    });
    document.addEventListener('click', (e) => {
      const { target } = e;
      const itsDropdown = target === item || item.contains(target);
      const isActive = item.classList.contains('dropdown_active');

      if (!itsDropdown && isActive) {
        item.classList.toggle('dropdown_active');
      }
    });
  }
}

window.onload = dropdownOnClick();

/* eslint-disable prefer-arrow-callback */
/* eslint-disable no-undef */

function select(item) {
  return document.querySelector(item);
}

function reloadSlick() {
  $('.slider-product-card').slick('unslick');
  $('.slider-product-card').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    dots: true,
    speed: 300,
    autoplaySpeed: 2000,
  });
}


$(document).ready(function () {
  $('.slider-product-card').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    dots: true,
    speed: 300,
    autoplaySpeed: 2000,
  });
});

/* const $carousel = $('.slider-products');

const settings = {
  dots: false,
  arrows: false,
  slide: '.slider-item',
  slidesToShow: 5,
  centerMode: true,
  centerPadding: '160px',
  speed: 300,
  autoplaySpeed: 2000,
  adaptiveHeight: true,
};

function setSlideVisibility() {
  // Find the visible slides i.e. where aria-hidden="false"
  const visibleSlides = $carousel.find('.slider-item[aria-hidden="false"]');
  // Make sure all of the visible slides have an opacity of 1
  $(visibleSlides).each(function () {
    $(this).css('opacity', 1);
  });

  // Set the opacity of the first and last partial slides.
  $(visibleSlides).first().prev().css('opacity', 0);
}

$carousel.slick(settings);
$carousel.slick('slickGoTo', 1);
setSlideVisibility();

$carousel.on('afterChange', function () {
  setSlideVisibility();
}); */







const productsLoop = select('.products-loop');













function windowOnLoad() {
  //scrollingHeader();
  //window.addEventListener("scroll", myFunction);
}

window.onload = windowOnLoad();

//# sourceMappingURL=../sourcemaps/main.min.js.map
